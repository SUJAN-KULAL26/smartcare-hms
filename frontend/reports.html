<!DOCTYPE html>
<html>
<head>
  <title>SmartCare HMS - Reports</title>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin:0;
      font-family:'Segoe UI',sans-serif;
      background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
      min-height:100vh;
      color:white;
      position:relative;
      overflow-x:hidden;
    }

    /* Background Glow */
    body::before, body::after {
      content:"";
      position:absolute;
      width:400px;
      height:400px;
      border-radius:50%;
      filter:blur(150px);
      z-index:-1;
    }

    body::before {
      background: rgba(0,123,255,0.3);
      top:-150px;
      left:-150px;
    }

    body::after {
      background: rgba(0,255,255,0.2);
      bottom:-150px;
      right:-150px;
    }

    /* NAVBAR */
    .navbar {
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(12px);
      padding:15px 30px;
      display:flex;
      gap:25px;
      align-items:center;
      border-bottom:1px solid rgba(255,255,255,0.15);
    }

    .navbar a {
      color:#ddd;
      text-decoration:none;
      font-weight:500;
      transition:0.3s;
    }

    .navbar a:hover {
      color:#00c6ff;
    }

    .navbar button {
      margin-left:auto;
      background: linear-gradient(90deg,#00c6ff,#0072ff);
      border:none;
      padding:8px 18px;
      border-radius:25px;
      color:white;
      cursor:pointer;
      font-weight:bold;
    }

    .container {
      padding:40px;
      max-width:1100px;
      margin:auto;
    }

    h3 {
      margin-bottom:20px;
      color:#ddd;
    }

    /* GLASS CARD */
    .card {
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(15px);
      padding:25px;
      border-radius:20px;
      box-shadow:0 20px 40px rgba(0,0,0,0.4);
      border:1px solid rgba(255,255,255,0.15);
      margin-bottom:30px;
    }

    /* TABLE */
    table {
      width:100%;
      border-collapse:collapse;
    }

    th, td {
      padding:14px;
      text-align:center;
    }

    th {
      background: rgba(255,255,255,0.15);
      color:#ddd;
    }

    tr {
      border-bottom:1px solid rgba(255,255,255,0.1);
    }

    tr:hover {
      background: rgba(255,255,255,0.05);
    }

    .amount {
      color:#00c6ff;
      font-weight:bold;
    }

  </style>
</head>

<body>

<div class="navbar">
  <a href="/dashboard.html">Dashboard</a>
  <a href="/patients.html">Patients</a>
  <a href="/doctors.html">Doctors</a>
  <a href="/appointments.html">Appointments</a>
  <a href="/billing.html">Billing</a>
  <a href="/reports.html">Reports</a>
  <button onclick="logout()">Logout</button>
</div>

<div class="container">

  <div class="card">
    <h3>Doctor Wise Revenue Report</h3>
    <table>
      <thead>
        <tr>
          <th>Doctor</th>
          <th>Total Revenue</th>
        </tr>
      </thead>
      <tbody id="doctorRevenueTable"></tbody>
    </table>
  </div>

</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

const token=localStorage.getItem("token");
const API="https://smartcare-hms-backend.onrender.com/api";

if(!token){
  window.location.href="/";
  return;
}

async function loadDoctorRevenue(){
  const res = await fetch(`${API}/billing/report/doctor-wise`,{
    headers:{ Authorization:"Bearer "+token }
  });

  const data=await res.json();
  const table=document.getElementById("doctorRevenueTable");
  table.innerHTML="";

  if(data.length===0){
    table.innerHTML="<tr><td colspan='2'>No revenue data</td></tr>";
    return;
  }

  data.forEach(d=>{
    table.innerHTML+=`
      <tr>
        <td>${d.doctorName}</td>
        <td class="amount">â‚¹${d.total}</td>
      </tr>`;
  });
}

window.logout=function(){
  localStorage.clear();
  window.location.href="/";
};

loadDoctorRevenue();

});
</script>

</body>
</html>